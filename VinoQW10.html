<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reporte A1.4 - Selección de Características</title>
  <style>
    /* Estilos generales */
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 0;
      background-color: #f9f9f9;
      color: #333;
    }

    header {
      background: #4CAF50;
      color: white;
      padding: 20px 0;
      text-align: center;
    }

    header h1 {
      margin: 0;
      font-size: 2rem;
    }

    .container {
      max-width: 1200px;
      margin: 20px auto;
      padding: 0 20px;
    }

    section {
      margin-bottom: 40px;
    }

    h2 {
      color: #4CAF50;
      border-bottom: 2px solid #4CAF50;
      padding-bottom: 5px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }

    table th, table td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }

    table th {
      background-color: #4CAF50;
      color: white;
    }

    .highlight {
      background-color: #e7f3e7;
      padding: 10px;
      border-left: 5px solid #4CAF50;
    }

    .btn {
      display: inline-block;
      padding: 10px 20px;
      background-color: #4CAF50;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }

    .btn:hover {
      background-color: #45a049;
    }

    footer {
      text-align: center;
      padding: 10px 0;
      background: #4CAF50;
      color: white;
      position: relative;
      bottom: 0;
      width: 100%;
    }

    /* Gráficos */
    img.graph {
      max-width: 100%;
      height: auto;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <header>
    <h1>Reporte A1.4 - Selección de Características</h1>
  </header>

  <div class="container">
    <!-- Fuente de Datos -->
    <section id="data-source">
      <h2>📁 Fuente de Datos</h2>
      <p>
        El conjunto de datos utilizado proviene del archivo "A1.4 Vino Tinto.csv", que contiene información sobre 1,599 observaciones de vinos tintos. Cada observación incluye 11 características químicas y una variable objetivo que indica la calidad del vino en una escala del 0 al 10.
      </p>
      <ul>
        <li><strong>Dimensiones:</strong> (1599, 12)</li>
        <li><strong>Características principales:</strong> acidezFija, acidezVolatil, acidoCitrico, azucarResidual, cloruros, dioxidoAzufreLibre, dioxidoAzufreTotal, densidad, pH, sulfatos, alcohol.</li>
        <li><strong>Variable objetivo:</strong> calidad.</li>
      </ul>
    </section>

    <!-- Importación de Datos -->
    <section id="data-import">
      <h2>📋 Importación de Datos</h2>
      <table>
        <thead>
          <tr>
            <th>acidezFija</th>
            <th>acidezVolatil</th>
            <th>acidoCitrico</th>
            <th>azucarResidual</th>
            <th>cloruros</th>
            <th>dioxidoAzufreLibre</th>
            <th>dioxidoAzufreTotal</th>
            <th>densidad</th>
            <th>pH</th>
            <th>sulfatos</th>
            <th>alcohol</th>
            <th>calidad</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>7.4</td>
            <td>0.7</td>
            <td>0</td>
            <td>1.9</td>
            <td>0.076</td>
            <td>11</td>
            <td>34</td>
            <td>0.9978</td>
            <td>3.51</td>
            <td>0.56</td>
            <td>9.4</td>
            <td>5</td>
          </tr>
          <tr>
            <td>7.8</td>
            <td>0.88</td>
            <td>0</td>
            <td>2.6</td>
            <td>0.098</td>
            <td>25</td>
            <td>67</td>
            <td>0.9968</td>
            <td>3.2</td>
            <td>0.68</td>
            <td>9.8</td>
            <td>5</td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- Separación de Datos -->
    <section id="data-split">
      <h2>✂️ Separación de Datos en Entrenamiento y Prueba</h2>
      <ul>
        <li><strong>Entrenamiento (X_train):</strong> (1279, 11)</li>
        <li><strong>Prueba (X_test):</strong> (320, 11)</li>
        <li><strong>Etiquetas de entrenamiento (y_train):</strong> (1279,)</li>
        <li><strong>Etiquetas de prueba (y_test):</strong> (320,)</li>
      </ul>
    </section>

    <!-- Selección de Características -->
    <section id="feature-selection">
      <h2>➡️ Selección Hacia Adelante</h2>
      <div class="highlight">
        <p><strong>Características seleccionadas:</strong> ['acidezVolatil', 'cloruros', 'dioxidoAzufreLibre', 'dioxidoAzufreTotal', 'pH', 'sulfatos', 'alcohol']</p>
      </div>
      <h2>📈 Modelo con Selección Hacia Adelante</h2>
      <p><strong>R cuadrada del modelo:</strong> 0.4013</p>

      <h2>⬅️ Selección Hacia Atrás</h2>
      <div class="highlight">
        <p><strong>Características seleccionadas:</strong> ['acidezVolatil', 'cloruros', 'dioxidoAzufreTotal', 'sulfatos', 'alcohol']</p>
      </div>
      <h2>📉 Modelo con Selección Hacia Atrás</h2>
      <p><strong>R cuadrada del modelo:</strong> 0.3959</p>
    </section>

    <!-- Comparación de Modelos -->
    <section id="model-comparison">
      <h2>📊 Comparación de Modelos</h2>
      <ul>
        <li><strong>Modelo con selección hacia adelante:</strong> R² = 0.4013</li>
        <li><strong>Modelo con selección hacia atrás:</strong> R² = 0.3959</li>
        <li><strong>Diferencia entre los modelos:</strong> 0.0054 (1.34%)</li>
      </ul>
      <canvas id="modelComparisonChart"></canvas>
    </section>

    <!-- Gráficos -->
    <section id="graphs">
      <h2>📊 Gráficos</h2>
      <p>A continuación se presentan los gráficos generados durante el análisis:</p>
      <img src="C:\Users\jonat\Downloads\visual\graphvino.png" alt="Gráfico 1" class="graph">
      <img src="C:\Users\jonat\Downloads\visual\graphvino2.png" alt="Gráfico 2" class="graph">
      <img src="C:\Users\jonat\Downloads\visual\graphvino3.png" alt="Gráfico 3" class="graph">
    </section>

    <!-- Código Python Completo -->
    <section id="python-code">
      <h2>🐍 Código Python Completo</h2>
      <pre>
import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.linear_model import LinearRegression
from mlxtend.feature_selection import SequentialFeatureSelector
from sklearn.metrics import r2_score

# Importar datos
data = pd.read_csv("A1.4 Vino Tinto.csv")
print(f"Dimensiones del DataFrame: {data.shape}")
print(data.head())

# Dividir datos
X = data.drop(columns=["calidad"])
y = data["calidad"]
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

# Selección hacia adelante
sfs_forward = SequentialFeatureSelector(LinearRegression(), k_features=(2, 8), forward=True, scoring='r2', cv=10)
sfs_forward.fit(X_train, y_train)
print("Características seleccionadas (Hacia adelante):", sfs_forward.k_feature_names_)

# Modelo con selección hacia adelante
X_train_forward = sfs_forward.transform(X_train)
X_test_forward = sfs_forward.transform(X_test)
model_forward = LinearRegression().fit(X_train_forward, y_train)
y_pred_forward = model_forward.predict(X_test_forward)
r2_forward = r2_score(y_test, y_pred_forward)
print(f"R cuadrada (Hacia adelante): {r2_forward}")

# Selección hacia atrás
sfs_backward = SequentialFeatureSelector(LinearRegression(), k_features=(2, 5), forward=False, scoring='r2', cv=10)
sfs_backward.fit(X_train_forward, y_train)
print("Características seleccionadas (Hacia atrás):", sfs_backward.k_feature_names_)

# Modelo con selección hacia atrás
X_train_backward = sfs_backward.transform(X_train_forward)
X_test_backward = sfs_backward.transform(X_test_forward)
model_backward = LinearRegression().fit(X_train_backward, y_train)
y_pred_backward = model_backward.predict(X_test_backward)
r2_backward = r2_score(y_test, y_pred_backward)
print(f"R cuadrada (Hacia atrás): {r2_backward}")
      </pre>
    </section>

    <!-- Conclusiones y Respuestas -->
    <section id="conclusion">
      <h2>🔍 Conclusiones y Respuestas</h2>
      <p>
        Ambos modelos tienen un R² relativamente bajo (<0.5), lo que indica que la calidad del vino puede depender de más factores no considerados. El modelo con selección hacia adelante es ligeramente superior en precisión. Para mejorar los resultados, podrían explorarse técnicas como árboles de decisión, random forests o redes neuronales, así como técnicas de regularización como Ridge o Lasso.
      </p>
      <a href="#data-source" class="btn">Volver al Inicio</a>
    </section>
  </div>

  <footer>
    <p>&copy; 2023 Reporte A1.4 - Selección de Características</p>
  </footer>

  <!-- JavaScript for Interactivity and Graph -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Smooth scrolling to sections
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        document.querySelector(this.getAttribute('href')).scrollIntoView({
          behavior: 'smooth'
        });
      });
    });

    // Graph for model comparison
    const ctx = document.getElementById('modelComparisonChart').getContext('2d');
    const modelComparisonChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Selección Hacia Adelante', 'Selección Hacia Atrás'],
        datasets: [{
          label: 'R²',
          data: [0.4013, 0.3959],
          backgroundColor: ['#4CAF50', '#FF9800'],
          borderColor: ['#4CAF50', '#FF9800'],
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true,
            max: 0.5,
            title: {
              display: true,
              text: 'R²'
            }
          }
        },
        plugins: {
          legend: {
            display: false
          },
          title: {
            display: true,
            text: 'Comparación de Modelos por R²'
          }
        }
      }
    });
  </script>
</body>
</html>